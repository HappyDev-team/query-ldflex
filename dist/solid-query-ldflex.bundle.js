var solid="object"==typeof solid?solid:{};solid.data=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=50)}([function(e,t,r){"use strict";var n=r(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DataHandler",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"DeleteFunctionHandler",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"ExecuteQueryHandler",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"InsertFunctionHandler",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"JSONLDResolver",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"MutationExpressionsHandler",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"MutationFunctionHandler",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"PathExpressionHandler",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"PathProxy",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"PathFactory",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"ReplaceFunctionHandler",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"SetFunctionHandler",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"SparqlHandler",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"SubjectHandler",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"StringToLDflexHandler",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"defaultHandlers",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"getFirstItem",{enumerable:!0,get:function(){return g.getFirstItem}}),Object.defineProperty(t,"iteratorFor",{enumerable:!0,get:function(){return g.iteratorFor}}),Object.defineProperty(t,"getThen",{enumerable:!0,get:function(){return x.getThen}}),Object.defineProperty(t,"toIterablePromise",{enumerable:!0,get:function(){return x.toIterablePromise}});var o=n(r(8)),a=n(r(9)),s=n(r(12)),i=n(r(14)),u=n(r(15)),c=n(r(18)),l=n(r(6)),f=n(r(19)),d=n(r(20)),p=n(r(45)),h=n(r(26)),y=n(r(25)),b=n(r(24)),m=n(r(23)),w=n(r(27)),v=n(r(22)),g=r(7),x=r(5)},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){var n=r(30);e.exports=n},function(e,t){e.exports=solid.auth},function(e){e.exports={"@context":{acl:"http://www.w3.org/ns/auth/acl#",app:"http://www.w3.org/ns/solid/app#",as:"https://www.w3.org/ns/activitystreams#",cert:"http://www.w3.org/ns/auth/cert#",dc:"http://purl.org/dc/elements/1.1/",dct:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",owl:"http://www.w3.org/2002/07/owl#",pim:"http://www.w3.org/ns/pim/space#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",sioc:"http://rdfs.org/sioc/ns#",solid:"http://www.w3.org/ns/solid/terms#",stat:"http://www.w3.org/ns/posix/stat#",vcard:"http://www.w3.org/2006/vcard/ns#",xsd:"http://www.w3.org/2001/XMLSchema#",accessControl:"acl:accessControl",accessTo:"acl:accessTo",accessToClass:"acl:accessToClass",agent:"acl:agent",agents:"acl:agent",agentClass:"acl:agentClass",agentClasses:"acl:agentClass",agentGroup:"acl:agentGroup",agentGroups:"acl:agentGroup",defaultAcl:"acl:default",defaultAclForNew:"acl:defaultForNew",delegates:"acl:delegates",mode:"acl:mode",modes:"acl:mode",origin:"acl:origin",origins:"acl:origin",actor:"as:actor",attachment:"as:attachment",attributedTo:"as:attributedTo",author:"as:author",bcc:"as:bcc",bto:"as:bto",cc:"as:cc",inReplyTo:"as:inReplyTo",object:"as:object",publicationDate:"as:published",subject:"as:subject",summary:"as:summary",target:"as:target",to:"as:to",abstract:"dc:abstract",abstracts:"dc:abstract",created:"dc:created",license:"dc:license",modified:"dc:modified",title:"dc:title",titles:"dc:title",account:"foaf:account",accounts:"foaf:account",age:"foaf:age",basedNear:"foaf:based_near",birthday:"foaf:birthday",blog:"foaf:weblog",depiction:"foaf:depiction",depicts:"foaf:depicts",email:"foaf:mbox",familyName:"foaf:familyName",firstName:"foaf:givenName",friend:"foaf:knows",friends:"foaf:knows",gender:"foaf:gender",givenName:"foaf:givenName",homepage:"foaf:homepage",image:"foaf:img",images:"foaf:img",interest:"foaf:topic_interest",interests:"foaf:topic_interest",knows:"foaf:knows",lastName:"foaf:familyName",logo:"foaf:logo",made:"foaf:made",maker:"foaf:maker",member:"foaf:member",name:"foaf:name",nick:"foaf:nick",page:"foaf:page",pages:"foaf:page",primaryTopic:"foaf:primaryTopic",primaryTopicOf:"foaf:primaryTopicOf",publication:"foaf:publications",publications:"foaf:publications",thumbnail:"foaf:thumbnail",thumbnails:"foaf:thumbnail",topic:"foaf:topic",topics:"foaf:topic",inbox:"ldp:inbox",inboxes:"ldp:inbox",storage:"pim:storage",preferences:"pim:preferencesFile",workspace:"pim:workspace",type:"rdf:type",types:"rdf:type",comment:"rdfs:comment",comments:"rdfs:comment",label:"rdfs:label",labels:"rdfs:label",seeAlso:"rdfs:seeAlso",definedBy:"rdfs:isDefinedBy",oidcIssuer:"solid:oidcIssuer",publicTypeIndex:"solid:publicTypeIndex",publicTypeIndexes:"solid:publicTypeIndex",privateTypeIndex:"solid:privateTypeIndex",privateTypeIndexes:"solid:privateTypeIndex"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getThen=o,t.toIterablePromise=function(e){"function"==typeof e&&(e=a(e()));return{[Symbol.asyncIterator]:()=>e[Symbol.asyncIterator](),get then(){return o(()=>(0,n.getFirstItem)(this))},catch(e){return this.then(null,e)},finally(e){return this.then().finally(e)}}},t.memoizeIterable=a;var n=r(7);function o(e){return(t,r)=>e().then(t,r)}function a(e){const t=[];let r=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){let e=0;return{async next(){if(e<t.length)return t[e++];if(!r)return{done:!0};const n=t[e++]=r.next();return(await n).done&&(r=null),n}}}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(2),o=r(5);t.default=class{constructor(e,t){this._mutationType=e,this._allowZeroArgs=t}handle(e,t){return(...r)=>{if(!this._allowZeroArgs&&!r.length)throw new Error(`Mutation on ${e} can not be invoked without arguments`);const n=(0,o.getThen)(()=>this.createMutationExpressions(e,t,r));return e.extendPath({mutationExpressions:{then:n}})}}async createMutationExpressions(e,t,r){const o=await t.pathExpression;if(!Array.isArray(o))throw new Error(`${e} has no pathExpression property`);if(o.length<2)throw new Error(`${e} should at least contain a subject and a predicate`);if(r.length){const{predicate:t}=o.pop();if(!t)throw new Error(`Expected predicate in ${e}`);const a=[];for(let e of r){let r=await e.pathExpression;Array.isArray(r)||(e.termType||(e=(0,n.literal)(e)),r=[{subject:e}]),a.push({mutationType:this._mutationType,domainExpression:o,predicate:t,rangeExpression:r})}return a}return[{mutationType:this._mutationType,domainExpression:o}]}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFirstItem=function(e){return e[Symbol.asyncIterator]().next().then(e=>e.value)},t.iteratorFor=function(e){return{async next(){if(e!==n){const t=await e;return e=n,{value:t}}return{done:!0}}}};const n={}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;class n{constructor(e,...t){this._isAsync=e.async,this._isFunction=e.function,this._dataProperties=t}static sync(...e){return new n({async:!1},...e)}static syncFunction(...e){return new n({async:!1,function:!0},...e)}static async(...e){return new n({async:!0},...e)}static asyncFunction(...e){return new n({async:!0,function:!0},...e)}handle(e){return this._isFunction?()=>this._resolveDataPath(e):this._resolveDataPath(e)}_resolveDataPath(e){if(!this._isAsync){for(const t of this._dataProperties)e=e&&e[t];return e}return new Promise(async t=>{for(const t of this._dataProperties)e=e&&await e[t];t(e)})}}t.default=n},function(e,t,r){"use strict";var n=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(6));t.default=class extends o.default{constructor(){super("DELETE",!0)}}},function(e,t){function r(){this.value=""}r.prototype.equals=function(e){return!!e&&e.termType===this.termType},r.prototype.termType="DefaultGraph",e.exports=r},function(e,t){function r(e){this.value=e}r.prototype.equals=function(e){return!!e&&e.termType===this.termType&&e.value===this.value},r.prototype.termType="NamedNode",e.exports=r},function(e,t,r){"use strict";var n=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(35)),a=n(r(36)),s=n(r(38));t.default=class{handle(e,t){var r=this;return(0,a.default)(function*(){const{queryEngine:n}=e.settings;if(!n)throw new Error(`${e} has no queryEngine setting`);const a=yield(0,o.default)(t.sparql);if(!a)throw new Error(`${e} has no sparql property`);var i,u=!0,c=!1;try{for(var l,f,d=(0,s.default)(n.execute(a));u=(l=yield(0,o.default)(d.next())).done,f=yield(0,o.default)(l.value),!u;u=!0){const t=f;yield r.extractTerm(t,e)}}catch(e){c=!0,i=e}finally{try{u||null==d.return||(yield(0,o.default)(d.return()))}finally{if(c)throw i}}})()}extractTerm(e,t){if(1!==e.size)throw new Error("Only single-variable queries are supported");const r=e.values().next().value;return t.extendPath({subject:r},null)}}},function(e,t){e.exports=function(e){this.wrapped=e}},function(e,t,r){"use strict";var n=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(6));t.default=class extends o.default{constructor(){super("INSERT",!1)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(39),o=r(2),a=r(5);t.default=class{constructor(e){this._context=(new n.ContextParser).parse(e)}supports(e){return"string"==typeof e}resolve(e,t){const r={then:(0,a.getThen)(()=>this.expandProperty(e))};return t.extendPath({property:e,predicate:r})}async expandProperty(e){e=e.replace(/[_$]/,":");const t=n.ContextParser.expandTerm(e,await this._context,!0);if(!n.ContextParser.isValidIri(t))throw new Error(`The JSON-LD context cannot expand the '${e}' property`);return(0,o.namedNode)(t)}}},function(e,t,r){r(41),e.exports=self.fetch.bind(self)},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function i(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(s,i)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),r(16);t.FetchDocumentLoader=class{load(e){return n(this,void 0,void 0,function*(){const t=yield fetch(e,{headers:{accept:"application/ld+json"}});if(t.ok)return yield t.json();throw new Error(`No valid context was found at ${e}: ${t.statusText}`)})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{async handle(e){const t=[];let r=e;for(;r;)r.mutationExpressions&&t.unshift(...await r.mutationExpressions),r=r.parent;return t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{async handle(e){const t=[];let r=e;for(;r.parent;){if(r.predicate){const e=await r.predicate;t.unshift({predicate:e})}r=r.parent}if(!r.subject)throw new Error(`Expected root subject in ${r}`);const n=await r.subject;return t.unshift({subject:n}),t}}},function(e,t,r){"use strict";var n=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(21));const a=Object.create(null);t.default=class{constructor({handlers:e=a,resolvers:t=[]}={}){this._handlers=e,this._resolvers=t}createPath(e={},t){void 0===t&&([t,e]=[e,{}]);const r=(0,o.default)({settings:e},t),n=r.proxy=new Proxy(r,this);if(!r.extendPath){const t=this;r.extendPath=function r(n,a=this){return t.createPath(e,(0,o.default)({parent:a,extendPath:r},n))}}return n}get(e,t){const r=this._handlers[t];if(r&&"function"==typeof r.handle)return r.handle(e,e.proxy);for(const r of this._resolvers)if(r.supports(t))return r.resolve(t,e,e.proxy)}}},function(e,t,r){var n=r(44);e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),o.forEach(function(t){n(e,t,r[t])})}return e}},function(e,t,r){"use strict";var n=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(8)),a=n(r(23)),s=n(r(19)),i=n(r(24)),u=n(r(12)),c=n(r(18)),l=n(r(14)),f=n(r(25)),d=n(r(26)),p=n(r(9)),h=n(r(27)),y=r(7),b=r(5),m={__esModule:()=>void 0,then:({subject:e},t)=>e?e.then&&(0,b.getThen)(()=>t.subject):(0,b.getThen)(()=>(0,y.getFirstItem)(t.results)),[Symbol.asyncIterator]:({subject:e},t)=>()=>e?(0,y.iteratorFor)(t.subject):t.results[Symbol.asyncIterator](),subject:new a.default,pathExpression:new s.default,sparql:new i.default,results:new u.default,mutationExpressions:new c.default,add:new l.default,set:new f.default,replace:new d.default,delete:new p.default,termType:o.default.sync("subject","termType"),value:o.default.sync("subject","value"),equals:o.default.sync("subject","equals"),language:o.default.sync("subject","language"),datatype:o.default.sync("subject","datatype"),toString:o.default.syncFunction("subject","value"),toPrimitive:o.default.syncFunction("subject","value"),resolve:new h.default};t.default=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{handle(e){let{subject:t,parent:r}=e;for(;!t&&r;)({subject:t,parent:r}=r);return t?Promise.resolve(t).then(t=>e.extendPath({subject:t},null)):void 0}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{async handle(e,t){const r=await t.mutationExpressions;if(Array.isArray(r)&&r.length)return this.evaluateMutationExpression(e,t,r);const n=await t.pathExpression;if(!Array.isArray(n))throw new Error(`${e} has no pathExpression property`);return this.evaluatePathExpression(e,t,n)}evaluatePathExpression(e,t,r){if(r.length<2)throw new Error(`${e} should at least contain a subject and a predicate`);const n=e.property.match(/[a-z0-9]*$/i)[0]||"result";return`SELECT ?${n} WHERE {\n  ${this.expressionToTriplePatterns(r,n).join("\n  ")}\n}`}evaluateMutationExpression(e,t,r){return r.map(e=>this.mutationExpressionToQuery(e)).join("\n;\n")}expressionToTriplePatterns([e,...t],r,n={}){const o=t.length-1;let a=this.termToQueryString(e.subject);return t.map((e,t)=>{const s=a,{predicate:i}=e;return a=t!==o?`?${this.getQueryVar(`v${t}`,n)}`:`?${r}`,`${s} ${this.termToQueryString(i)} ${a}.`})}mutationExpressionToQuery({mutationType:e,domainExpression:t,predicate:r,rangeExpression:n}){const o={};let a,s=[];const{queryVar:i,clauses:u}=this.getQueryVarAndClauses(t,o);if(u.length&&(s=u),n){const{queryVar:e,clauses:t}=this.getQueryVarAndClauses(n,o);t.length&&(s=s.length?s.concat(t):t),a=`${i} ${this.termToQueryString(r)} ${e}`}else a=u[u.length-1].slice(0,-1);return s.length?`${e} {\n  ${a}\n} WHERE {\n  ${s.join("\n  ")}\n}`:`${e} DATA {\n  ${a}\n}`}getQueryVarAndClauses(e,t){const r=e[e.length-1];if(1===e.length)return{queryVar:this.termToQueryString(r.subject),clauses:[]};const n=this.getQueryVar(r.predicate.value.match(/[a-z0-9]*$/i)[0]||"result",t);return{queryVar:`?${n}`,clauses:this.expressionToTriplePatterns(e,n,t)}}getQueryVar(e,t){let r=e,n=0;for(;t[r];)r=`${e}_${n++}`;return t[r]=!0,r}termToQueryString(e){switch(e.termType){case"NamedNode":return`<${e.value}>`;case"BlankNode":return`_:${e.value}`;case"Literal":return`"${e.value.replace(/"/g,'\\"')}"`;default:throw new Error(`Could not convert a term of type ${e.termType}`)}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{handle(e,t){return(...e)=>t.delete().add(...e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{handle(e,t){return function(e,...r){if(!e||!r.length)throw new Error("Replacing values requires at least two arguments, old value followed by all new values");return t.delete(e).add(...r)}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{handle(e,t){return(e="",r=t)=>{const n=`"use strict";return ldflex${e.replace(/^(?=[a-z$_])/i,".").replace(/\[([^'"`\](]*)\]/g,'["$1"]')}`;let o;try{o=Function("ldflex",n)}catch({message:t}){throw new Error(`Expression "${e}" is invalid: ${t}`)}return o(r)}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(46)).default;t.default=n},function(e,t,r){var n=r(48),o=r(49);e.exports=function(e,t,r){var a=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var i=0;i<16;++i)t[a+i]=s[i];return t||o(s)}},function(e,t,r){var n=r(31),o=r(10),a=r(32),s=r(11),i=r(33),u=r(34);function c(){}c.namedNode=function(e){return new s(e)},c.blankNode=function(e){return new n(e)},c.literal=function(e,t){return"string"==typeof t?-1===t.indexOf(":")?new a(e,t):new a(e,null,c.namedNode(t)):new a(e,null,t)},c.defaultGraph=function(){return c.defaultGraphInstance},c.variable=function(e){return new u(e)},c.triple=function(e,t,r){return c.quad(e,t,r)},c.quad=function(e,t,r,n){return new i(e,t,r,n||c.defaultGraphInstance)},c.defaultGraphInstance=new o,e.exports=c},function(e,t){function r(e){this.value=e||"b"+ ++r.nextId}r.prototype.equals=function(e){return!!e&&e.termType===this.termType&&e.value===this.value},r.prototype.termType="BlankNode",r.nextId=0,e.exports=r},function(e,t,r){var n=r(11);function o(e,t,r){this.value=e,this.datatype=o.stringDatatype,this.language="",t?(this.language=t,this.datatype=o.langStringDatatype):r&&(this.datatype=r)}o.prototype.equals=function(e){return!!e&&e.termType===this.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)},o.prototype.termType="Literal",o.langStringDatatype=new n("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),o.stringDatatype=new n("http://www.w3.org/2001/XMLSchema#string"),e.exports=o},function(e,t,r){var n=r(10);function o(e,t,r,o){this.subject=e,this.predicate=t,this.object=r,this.graph=o||new n}o.prototype.equals=function(e){return!!e&&e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)},e.exports=o},function(e,t){function r(e){this.value=e}r.prototype.equals=function(e){return!!e&&e.termType===this.termType&&e.value===this.value},r.prototype.termType="Variable",e.exports=r},function(e,t,r){var n=r(13);e.exports=function(e){return new n(e)}},function(e,t,r){var n=r(37);e.exports=function(e){return function(){return new n(e.apply(this,arguments))}}},function(e,t,r){var n=r(13);function o(e){var t,r;function o(t,r){try{var s=e[t](r),i=s.value,u=i instanceof n;Promise.resolve(u?i.wrapped:i).then(function(e){u?o("next",e):a(s.done?"return":"normal",e)},function(e){o("throw",e)})}catch(e){a("throw",e)}}function a(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?o(t.key,t.arg):r=null}this._invoke=function(e,n){return new Promise(function(a,s){var i={key:e,arg:n,resolve:a,reject:s,next:null};r?r=r.next=i:(t=r=i,o(e,n))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(o.prototype[Symbol.asyncIterator]=function(){return this}),o.prototype.next=function(e){return this._invoke("next",e)},o.prototype.throw=function(e){return this._invoke("throw",e)},o.prototype.return=function(e){return this._invoke("return",e)},e.exports=o},function(e,t){e.exports=function(e){var t;if("function"==typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(40)),n(r(17))},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function i(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(s,i)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),r(16);const o=r(42),a=r(17);class s{constructor(e){e=e||{},this.documentLoader=e.documentLoader||new a.FetchDocumentLoader,this.documentCache={},this.validate=!e.skipValidation,this.expandContentTypeToBase=e.expandContentTypeToBase}static getPrefix(e,t){const r=e.indexOf(":");if(r>=0){if(e.length>r+1&&"/"===e.charAt(r+1)&&"/"===e.charAt(r+2))return null;const n=e.substr(0,r);if("_"===n)return null;if(t[n])return n}return null}static getContextValueId(e){if(null===e||"string"==typeof e)return e;const t=e["@id"];return t||null}static expandTerm(e,t,r){const n=t[e];if(null===n||n&&null===n["@id"])return null;if(n&&r){const t=this.getContextValueId(n);if(t&&t!==e)return t}const a=s.getPrefix(e,t);if(a){const r=this.getContextValueId(t[a]);if(r)return r+e.substr(a.length+1)}else{if(r&&t["@vocab"]&&"@"!==e.charAt(0)&&e.indexOf(":")<0)return t["@vocab"]+e;if(!r&&t["@base"]&&"@"!==e.charAt(0)&&e.indexOf(":")<0)return o.resolve(e,t["@base"])}return e}static isPrefixValue(e){return e&&("string"==typeof e||e["@id"]||e["@type"])}static isValidIri(e){return s.IRI_REGEX.test(e)}static idifyReverseTerms(e){for(const t of Object.keys(e)){const r=e[t];if(r&&"object"==typeof r&&r["@reverse"]&&!r["@id"]){if("string"!=typeof r["@reverse"])throw new Error(`Invalid @reverse value: '${r["@reverse"]}'`);r["@id"]=r["@reverse"],r["@reverse"]=!0}}return e}static expandPrefixedTerms(e,t){for(const r of Object.keys(e))if(s.EXPAND_KEYS_BLACKLIST.indexOf(r)<0){if("@"===r[0]&&s.ALIAS_KEYS_BLACKLIST.indexOf(r)>=0)throw new Error(`Keywords can not be aliased to something else.\nTried mapping ${r} to ${e[r]}`);for(;s.isPrefixValue(e[r]);){const n=e[r];let o=!1;if("string"==typeof n)e[r]=s.expandTerm(n,e,!0),o=o||n!==e[r];else{const a=n["@id"],i=n["@type"];a&&(e[r]["@id"]=s.expandTerm(a,e,!0),o=o||a!==e[r]["@id"]),i&&"@vocab"!==i&&(e[r]["@type"]=s.expandTerm(i,e,!0),t&&i===e[r]["@type"]&&(e[r]["@type"]=s.expandTerm(i,e,!1)),o=o||i!==e[r]["@type"])}if(!o)break}}return e}static validate(e){for(const t of Object.keys(e)){const r=e[t],n=typeof r;if("@"===t[0])switch(t.substr(1)){case"vocab":if(null!==r&&"string"!==n)throw new Error(`Found an invalid @vocab IRI: ${r}`);break;case"base":if(null!==r&&"string"!==n)throw new Error(`Found an invalid @base IRI: ${e[t]}`);break;case"language":if(null!==r&&"string"!==n)throw new Error(`Found an invalid @language string: ${r}`)}if(null!==r)switch(n){case"string":break;case"object":if(t.indexOf(":")<0&&!("@id"in r)&&("@id"===r["@type"]?!e["@base"]:!e["@vocab"]))throw new Error(`Missing @id in context entry: '${t}': '${JSON.stringify(r)}'`);for(const e of Object.keys(r)){const n=r[e];if(n)switch(e){case"@id":if("@"===n[0]&&"@type"!==n&&"@id"!==n)throw new Error(`Illegal keyword alias in term value, found: '${t}': '${JSON.stringify(r)}'`);break;case"@type":if("@id"!==n&&"@vocab"!==n&&("_"===n[0]||!s.isValidIri(n)))throw new Error(`A context @type must be an absolute IRI, found: '${t}': '${n}'`);break;case"@reverse":if("string"==typeof n&&r["@id"]&&r["@id"]!==n)throw new Error(`Found non-matching @id and @reverse term values in '${t}':'${n}' and '${r["@id"]}'`);break;case"@container":if("@list"===n&&r["@reverse"])throw new Error(`Term value can not be @container: @list and @reverse at the same time on '${t}'`);if(s.CONTAINERS.indexOf(n)<0)throw new Error(`Invalid term @container for '${t}' ('${n}'), must be one of ${s.CONTAINERS.join(", ")}`);break;case"@language":if(null!==n&&"string"!=typeof n)throw new Error(`Found an invalid term @language string in: '${t}': '${JSON.stringify(r)}'`)}}break;default:throw new Error(`Found an invalid term value: '${t}': '${r}'`)}}}parse(e,{baseIri:t,parentContext:r,external:a}={}){return n(this,void 0,void 0,function*(){if(null===e||void 0===e)return t?{"@base":t}:{};if("string"==typeof e){if(!s.isValidIri(e)&&(e=o.resolve(e,t),!s.isValidIri(e)))throw new Error(`Invalid context IRI: ${e}`);return this.parse(yield this.load(e),{baseIri:t,parentContext:r,external:!0})}if(Array.isArray(e)){return(yield Promise.all(e.map(e=>"string"==typeof e?this.load(e):e))).reduce((e,r)=>e.then(e=>this.parse(r,{baseIri:t,parentContext:e,external:a})),Promise.resolve(r))}if("object"==typeof e){if(e["@context"])return yield this.parse(e["@context"],{baseIri:t,parentContext:r,external:a});let n={};return a&&delete e["@base"],!t||"@base"in n||(n["@base"]=t),n=Object.assign({},n,r,e),s.idifyReverseTerms(n),s.expandPrefixedTerms(n,this.expandContentTypeToBase),this.validate&&s.validate(n),n}throw new Error(`Tried parsing a context that is not a string, array or object, but got ${e}`)})}load(e){return n(this,void 0,void 0,function*(){const t=this.documentCache[e];return t?Array.isArray(t)?t.slice():Object.assign({},t):this.documentCache[e]=(yield this.documentLoader.load(e))["@context"]})}}s.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\^~\[\]`]*$/,s.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language"],s.ALIAS_KEYS_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value"],s.CONTAINERS=["@list","@set","@index","@language"],t.ContextParser=s},function(e,t,r){"use strict";r.r(t),r.d(t,"Headers",function(){return c}),r.d(t,"Request",function(){return b}),r.d(t,"Response",function(){return w}),r.d(t,"DOMException",function(){return g}),r.d(t,"fetch",function(){return x});var n={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(n.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(e){return e&&o.indexOf(Object.prototype.toString.call(e))>-1};function s(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){return"string"!=typeof e&&(e=String(e)),e}function u(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n.iterable&&(t[Symbol.iterator]=function(){return t}),t}function c(e){this.map={},e instanceof c?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function d(e){var t=new FileReader,r=f(t);return t.readAsArrayBuffer(e),r}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:n.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:n.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():n.arrayBuffer&&n.blob&&function(e){return e&&DataView.prototype.isPrototypeOf(e)}(e)?(this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||a(e))?this._bodyArrayBuffer=p(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,r=f(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(e,t){e=s(e),t=i(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},c.prototype.delete=function(e){delete this.map[s(e)]},c.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},c.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},c.prototype.set=function(e,t){this.map[s(e)]=i(t)},c.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},c.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),u(e)},c.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),u(e)},c.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),u(e)},n.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e,t){var r=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new c(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new c(t.headers)),this.method=function(e){var t=e.toUpperCase();return y.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function m(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function w(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new c(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},h.call(b.prototype),h.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var v=[301,302,303,307,308];w.redirect=function(e,t){if(-1===v.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})};var g=self.DOMException;try{new g}catch(e){(g=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),g.prototype.constructor=g}function x(e,t){return new Promise(function(r,o){var a=new b(e,t);if(a.signal&&a.signal.aborted)return o(new g("Aborted","AbortError"));var s=new XMLHttpRequest;function i(){s.abort()}s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:function(e){var t=new c;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}}),t}(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL");var t="response"in s?s.response:s.responseText;r(new w(t,e))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.onabort=function(){o(new g("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&n.blob&&(s.responseType="blob"),a.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),a.signal&&(a.signal.addEventListener("abort",i),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",i)}),s.send(void 0===a._bodyInit?null:a._bodyInit)})}x.polyfill=!0,self.fetch||(self.fetch=x,self.Headers=c,self.Request=b,self.Response=w)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(43))},function(e,t,r){"use strict";function n(e){const t=[];let r=0;for(;r<e.length;)switch(e[r]){case"/":if("."===e[r+1])if("."===e[r+2]){if(!a(e[r+3])){t[t.length-1].push(e.substr(r)),r=e.length;break}t.pop(),e[r+3]||t.push([]),r+=3}else{if(!a(e[r+2])){t[t.length-1].push(e.substr(r)),r=e.length;break}e[r+2]||t.push([]),r+=2}else t.push([]),r++;break;case"#":case"?":t.length||t.push([]),t[t.length-1].push(e.substr(r)),r=e.length;break;default:t.length||t.push([]),t[t.length-1].push(e[r]),r++}return"/"+t.map(e=>e.join("")).join("/")}function o(e,t){let r=t+1;t>=0?"/"===e[t+1]&&"/"===e[t+2]&&(r=t+3):"/"===e[0]&&"/"===e[1]&&(r=2);const o=e.indexOf("/",r);return o<0?e:e.substr(0,o)+n(e.substr(o))}function a(e){return!e||"#"===e||"?"===e||"/"===e}Object.defineProperty(t,"__esModule",{value:!0}),t.resolve=function(e,t){const r=(t=t||"").indexOf("#");if(r>0&&(t=t.substr(0,r)),!e.length)return t;if(e.startsWith("?")){const r=t.indexOf("?");return r>0&&(t=t.substr(0,r)),t+e}if(e.startsWith("#"))return t+e;if(!t.length)return o(e,e.indexOf(":"));const a=e.indexOf(":");if(a>=0)return o(e,a);const s=t.indexOf(":");if(s<0)throw new Error(`Found invalid baseIRI '${t}' for value '${e}'`);const i=t.substr(0,s+1);if(0===e.indexOf("//"))return i+o(e,a);let u;if(t.indexOf("//",s)!==s+1)return u=t.indexOf("/",s+1),t.length>s+1?t+"/"+o(e,a):i+o(e,a);if((u=t.indexOf("/",s+3))<0)return t.length>s+3?t+"/"+o(e,a):i+o(e,a);if(0===e.indexOf("/"))return t.substr(0,u)+n(e);let c=t.substr(u);const l=c.lastIndexOf("/");return l>=0&&l<c.length-1&&(c=c.substr(0,l+1),"."===e[0]&&"."!==e[1]&&"/"!==e[1]&&e[2]&&(e=e.substr(1))),e=n(e=c+e),t.substr(0,u)+e},t.removeDotSegments=n,t.removeDotSegmentsOfPath=o},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){"use strict";var n=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.toHandler=c,t.toResolver=l,t.default=void 0;var o=n(r(21)),a=n(r(20)),s=n(r(15)),i=n(r(22));class u{constructor(e,t){this._settings=e=(0,o.default)({},e),this._data=t=(0,o.default)({},t);const r=e.handlers||i.default;for(const e in r)r[e]=c(r[e]);for(const e of Object.getOwnPropertySymbols(r))r[e]=c(r[e]);const n=(e.resolvers||[]).map(l);e.context&&n.push(new s.default(e.context)),this._pathProxy=new a.default({handlers:r,resolvers:n}),delete e.handlers,delete e.resolvers,delete e.context}create(e={},t){return t||([t,e]=[e,null]),this._pathProxy.createPath(Object.assign(Object.create(null),this._settings,e),Object.assign(Object.create(null),this._data,t))}}function c(e){return"function"==typeof e.handle?e:{handle:e}}function l(e){return"function"==typeof e.resolve?e:{supports:f,resolve:e}}function f(){return!0}t.default=u,u.defaultHandlers=i.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=r(47);t.default=class{constructor(e,t){this._subject=e,this._source=t,this._engine=n}execute(e){if(e.startsWith("INSERT")||e.startsWith("DELETE"))return this.executeUpdate(e);let t;return{next:async()=>{if(!t){const r=await this._source||this.getDocument(await this._subject),n=(Array.isArray(r)?await Promise.all(r):[r]).map(e=>({type:"string"==typeof e?"file":"rdfjsSource",value:e})),o=await this._engine.query(e,{sources:n});t=o.bindingsStream}return new Promise(r)},[Symbol.asyncIterator](){return this}};function r(e){const r=()=>e({done:!0});t.ended?r():(t.once("data",n=>{e({value:n}),t.removeListener("end",r)}),t.on("end",r))}}executeUpdate(e){throw new Error(`Comunica does not support SPARQL UPDATE queries, received: ${e}`)}getDocument(e){return e.value.replace(/#.*/,"")}}},function(e,t){},function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,o=r;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},function(e,t,r){"use strict";r.r(t);var n=r(0),o=r(4),a=r(2),s=r(28),i=r.n(s),u=r(3),c=r.n(u);class l extends i.a{executeUpdate(e){if(this._source)throw new Error("Updates on non-subject sources not yet supported.");let t=!1;return{next:async()=>{if(!t){t=!0;const r=this.getDocument(await this._subject),n=await c.a.fetch(r,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:e});if(!n.ok)throw new Error(`Update query failed (${n.status}): ${n.statusText}`);return{value:{size:1,values:()=>({next:()=>({value:{ok:!0}})})}}}return{done:!0}},[Symbol.asyncIterator](){return this}}}}class f{constructor(e,t){this._paths=e,this._source=t}supports(e){return"string"==typeof e}resolve(e){return this._createSubjectPath(Object(a.namedNode)(e))}_createSubjectPath(e){const t=new l(e,this._source);return this._paths.create({queryEngine:t},{subject:e})}}var d=r(29),p=r.n(d);function h(e){return new b(e)}function y(e){var t,r;function n(t,r){try{var a=e[t](r),s=a.value,i=s instanceof b;Promise.resolve(i?s.wrapped:s).then(function(e){i?n("next",e):o(a.done?"return":"normal",e)},function(e){n("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,o){return new Promise(function(a,s){var i={key:e,arg:o,resolve:a,reject:s,next:null};r?r=r.next=i:(t=r=i,n(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function b(e){this.wrapped=e}"function"==typeof Symbol&&Symbol.asyncIterator&&(y.prototype[Symbol.asyncIterator]=function(){return this}),y.prototype.next=function(e){return this._invoke("next",e)},y.prototype.throw=function(e){return this._invoke("throw",e)},y.prototype.return=function(e){return this._invoke("return",e)};const m="_:activity a _:type;\n    <https://www.w3.org/ns/activitystreams#actor> _:actor;\n    <https://www.w3.org/ns/activitystreams#object> _:object;\n    <https://www.w3.org/ns/activitystreams#published> _:published.\n",w=o["@context"],v=w.as,g=w.xsd;class x{constructor({type:e=`${v}#Like`,path:t="/public/activities"}={}){this._type=e,this._path=t}handle(e,t){const r=this,o=t.root,a=o.user;return()=>Object(n.toIterablePromise)(function(e){return function(){return new y(e.apply(this,arguments))}}(function*(){const e=[],n=[],s=r._type,i=yield h(a),u=(new Date).toISOString();var c,l=!0,f=!1;try{for(var d,y,b=function(e){var t;if("function"==typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}(t);l=(d=yield h(b.next())).done,y=yield h(d.value),!l;l=!0){const t=y;if("string"==typeof t||"NamedNode"===t.termType){const o=`#${p()()}`,a={id:o,type:s,actor:i,object:t,time:u};e.push(o),n.push(r._createActivity(a))}}}catch(e){f=!0,c=e}finally{try{l||null==b.return||(yield h(b.return()))}finally{if(f)throw c}}const m=new URL(r._path,yield h(a.pim_storage));yield h(r._sendPatch(m,{insert:n.join("")}));for(const t of e)yield o[new URL(t,m)]}))}_createActivity({id:e,type:t,actor:r,object:n,time:o}){return m.replace(/_:activity/,`<${e}>`).replace(/_:type/,`<${t}>`).replace(/_:actor/g,`<${r}>`).replace(/_:object/g,`<${n}>`).replace(/_:published/g,`"${o}"^^<${g}dateTime>`)}_sendPatch(e,{insert:t}){const r=`INSERT {\n${t}\n}`;return c.a.fetch(e,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:r})}}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){P(e,t,r[t])})}return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const O=o["@context"].as;let T;const E=new n.PathFactory({context:o,handlers:j({},n.defaultHandlers,{like:new x({type:`${O}Like`}),dislike:new x({type:`${O}Dislike`}),follow:new x({type:`${O}Follow`}),root:()=>T})});t.default=T=new n.PathFactory({handlers:j({},n.defaultHandlers,{from:new class{constructor(e){this._paths=e}handle(){return e=>this._createSourcePathFactory(e)}_createSourcePathFactory(e){return new n.PathFactory({handlers:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_(e,t,r[t])})}return e}({},n.defaultHandlers),resolvers:[new f(this._paths,e)]}).create()}}(E),user:new class extends f{handle(){const e=this.getWebId().then(a.namedNode);return this._createSubjectPath(e)}async getWebId(){const e=await c.a.currentSession();if(!e)throw new Error("Cannot resolve user path: no user logged in");return e.webId}}(E)}),resolvers:[new f(E)]}).create()}]).default;
//# sourceMappingURL=solid-query-ldflex.bundle.js.map